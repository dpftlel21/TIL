# 12월 원티드 프리온보딩 (2024. 12. 04)


# 상태의 종류와 관리 전략

### ✔️ 상태의 종류

1. 로컬 상태 (Local State)

    단일 컴포넌트에서만 사용되는 상태, React의 useState를 사용하여 관리

2. 전역 상태 (Global State)

    여러 컴포넌트에서 공유되는 상태, React의 Context API를 사용하여 관리하거나 Redux, Recoil 같은 상태 관리 라이브러리를 사용

3. 서버  상태 (Server State)

    서버에서 가져온 상태, React Query, SWR 같은 라이브러리를 사용하여 관리

4. URL 상태 (URL State)

    브라우저의 URL에 의존하는 상태, React Router와 같은 라우팅 라이브러리를 사용하여 관리

5. 폼 상태 (Form State)

    사용자 입력을 받는 상태, React Hook Form, Formik 같은 라이브러리를 사용하여 관리

### ✔️ 고급 상태 관리 패턴

1. 상태 정규화 (Normalization)

    복잡한 중첩 상태를 다룰 때는 상태를 정규화하여 관리하는 것이 효율적입니다. 이는 데이터를 플랫하게 구조화하고 ID를 기준으로 참조하는 방식으로 데이터를 관리하는 것을 의미합니다.

    ```jsx
    const data = {
        posts: {
            "1": {
                id: 1,
                title: "제목",
                content: "내용"
            },
            "2": {
                id: 2,
                title: "제목2",
                content: "내용2"
            }
        }
    }

    // data.posts[1]
    ```

2. 불변성 유지

    상태를 업데이트 할 때는 불변성을 유지하는 것이 중요합니다. 이는 예측 가능한 상태 변화와 최적화에 도움이 됩니다.
    
    spread 연산자를 사용하여 새로운 객체를 생성하는 방법이 있습니다.

    ```jsx
    const newPosts = { ...posts, "3": { id: 3, title: "제목3", content: "내용3" } };
    ```

3. 상태 파생

    상태는 다른 상태로부터 파생될 수 있습니다. 이는 예측 가능한 상태 변화와 최적화에 도움이 됩니다.

4. Optimistic UI

    사용자의 상호작용을 먼저 반영하고 나중에 서버와 동기화하는 방법, 사용자 경험을 향상시키는 데 도움이 됩니다.

### ✔️ 성능 최적화

1. 메모이제이션 (Memoization)

    자주 사용되는 계산 결과를 메모리에 저장하여 성능을 향상시키는 방법, React의 useMemo 훅을 사용하여 구현할 수 있습니다.

2. 상태 분할

    큰 상태를 작은 상태로 분할하여 관리하는 방법, 이는 불필요한 렌더링을 방지하고 성능을 향상시키는 데 도움이 됩니다.

3. 지연 로딩

    데이터를 필요할 때 로딩하는 방법, React의 lazy와 Suspense를 사용하여 구현할 수 있습니다.

### ✔️ 전역 상태의 필요성

1. Recoil이 필요한 이유

    - 상태 관리 단순화
    - 데이터 흐름 명확화
    - 불필요한 렌더링 방지
    - 컴포넌트 간 데이터 공유 용이
    - 확장성과 공유성

2. Context API가 필요한 이유

    단순한 상태 구조에 주로 사용!

    - 설정 및 활용이 쉬움
    - 빠른 구현
    - 직관적 사용성
    - React와의 통합
    - 작은 규모에서 성능 문제 적음

    ex) 다크모드에서 로컬스토리지 저장, Toast 메시지 출력 등

### ✔️ 데이터 저장의 똑똑한 실무 팁

1. 쿠키

    - 사용 목적

        - 사용자 인증 정보 저장 (JWT)
        - 트레킹 및 분석

    - 쿠키 속성

        - httpOnly: 자바스크립트에서 접근 불가, document.cookie API를 통해 쿠키를 조작할 때 httpOnly가 true인 쿠키는 접근할 수 없습니다.
        - secure: HTTPS 프로토콜을 통해서만 쿠키를 전송합니다.
        - expires: 쿠키의 만료 시간을 설정합니다. 만료 시간이 지나면 쿠키는 자동으로 삭제됩니다.
        - max-age: 쿠키의 만료 시간을 설정합니다. 만료 시간이 지나면 쿠키는 자동으로 삭제됩니다.
        - sameSite: 다른 도메인으로 HTTP 요청을 보낼 때 쿠키를 포함할지 여부를 설정합니다.
        - path: 쿠키가 적용되는 경로를 설정합니다.
        - domain: 쿠키가 적용되는 도메인을 설정합니다.
        - `credentials: 'include'` 옵션을 통해 자격 증명(쿠키)을 포함합니다.

    - 사용 예시

        ```jsx
            const cookieOptions = {
                httpOnly: true, //XSS 방지
                secure: true, //HTTPS 프로토콜을 통해서만 쿠키를 전송
                expires: new Date(Date.now() + 1000 * 60 * 60 * 24), //1일 후 만료
            }
        ```

2. 로컬 스토리지

    브라우저에 영구적으로 데이터를 저장할 수 있게 해주는 저장소입니다.

    - 새로고침해도 남아있음

    - 사용예시 : 다크모드, 언어 선택, 테마 선택 등

3. 세션 스토리지

    브라우저 세션 동안 데이터를 저장할 수 있게 해주는 저장소입니다.

    - 새로고침해도 남아있음
    - 탭 닫으면 사라짐
    - 사용예시 : 임시 데이터 저장 (모달에서 다시 보지않기)
    