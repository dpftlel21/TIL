# 1. Effect

Effect를 사용하면 특정 이벤트가 아닌 렌더링 자체로 인해 발생하는 사이드 이펙트(프로그램의 state 변경)를 명시할 수 있습니다. 서버 연결을 설정하는 것은 컴포넌트를 표시하게 만든 상호작용에 관계없이 발생해야 하기 때문에 하나의 Effect이며, Effect는 화면 업데이트 후 커밋이 끝날 때 실행됩니다.

Effect는 React 코드에서 벗어나 일부 외부 시스템과 동기화하는 데에 사용되며 브라우저 API, 서드파티 위젯, 네트워크 등이 포함됩니다.


### ✔️ Effect 작성

`1. Effect 선언 `

```jsx
import { useEffect } from "react";
// useEffect Hook import 하기

function MyComponent() {
  useEffect(() => {
    // 여기의 코드는 매 렌더링 후에 실행
  });
  // 컴포넌트의 최상위 레벨에서 호출하고 Effect 내부에 코드를 추가
  return <div />;
}

// useEffect는 해당 렌더링이 화면에 반영이 될 때까지 코드 조각의 실행을 지연
```

`2. Effect 의존성 명시`

가끔 속도가 느릴 수 있으며, 외부 시스템과의 동기화가 항상 즉각적이지 않아 꼭 필요한 경우가 아니면 동기화를 건너뛰는 게 좋습니다.

가끔 잘못된 경우도 있습니다. 예를 들어, 키 입력 시마다 컴포넌트 페이드인 애니메이션을 발동시키고 싶지 않을 수 있습니다. 애니메이션은 컴포넌트가 처음 나타날 때 한 번만 재생되어야 합니다.

```jsx
useEffect(() => {
  // ...
}, []);
```

useEffect 호출의 두 번째 인자로 의존성 배열을 지정하여 React가 불필요하게 Effect를 다시 실행하지 않도록 지시할 수 있습니다.

`3. 필요한 경우 클린업 추가`

일부 Effect는 수행중이던 작업을 중지, 취소 또는 정리하는 방법을 명시해야합니다. 예를 들어, “connect”에는 “disconnect”가 필요하고 “subscribe”에는 “unsubscribe”가 필요하며 “fetch”에는 “cancel”또는 “ignore”가 필요합니다.

클린업 함수를 구현하여 개발 환경에서 두 번씩 실행되는 Effect를 처리할 수 있습니다. 클린업 함수는 Effect가 수행 중이던 작업을 중지하거나 취소해야하며, 상용 환경에서 한 번만 실행되는 Effect와 (개발 환경에서의) 설정 → 정리 → 설정 시퀀스를 사용자가 구분할 수 없어야 합니다.

---
